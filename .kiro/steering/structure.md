# Project Structure

## Root Directory Organization

### Core Application
- **`app/`** - Expo Router file-based routing structure
  - **`(auth)/`** - Authentication flow screens (sign-in, sign-up, forgot-password, callback)
  - **`(tabs)/`** - Main tab navigation screens (index, workouts, food, profile)
  - **`components/`** - Reusable UI components (Logo, AppleSignInButton)
  - **`@types/`** - App-specific TypeScript type definitions
  - **`_layout.tsx`** - Root layout configuration
  - **`index.tsx`** - App entry point
  - **`add-food.tsx`** - Food logging screen
  - **`add-workout.tsx`** - Workout logging screen

### Shared Logic & Services
- **`contexts/`** - React Context providers for global state
  - `AuthContext.tsx` - Authentication state management
  - `FoodContext.tsx` - Food tracking state
  - `WorkoutsContext.tsx` - Workout tracking state
- **`lib/`** - Core business logic and utilities
  - **`services/`** - Service layer classes (ErrorHandler, OAuthHandler, SessionManager)
  - **`types/`** - Shared TypeScript definitions
  - `supabase.ts` - Supabase client configuration
  - `auth-utils.ts` - Authentication helper functions
- **`hooks/`** - Custom React hooks
- **`types/`** - Global TypeScript definitions

### Backend & Database
- **`supabase/`** - Supabase configuration and migrations
  - **`migrations/`** - SQL migration files
  - `config.toml` - Local Supabase configuration

### Build & Configuration
- **`ios/`** - Native iOS project files (generated by Expo)
- **`assets/`** - Static assets (images, fonts)
- **`scripts/`** - Build and deployment scripts
- **`.expo/`** - Expo build artifacts and configuration
- **`.kiro/`** - Kiro AI assistant configuration and specs

### Testing & Quality
- **`tests/`** - Test files
  - **`e2e/`** - End-to-end tests using Playwright

## File Naming Conventions

### Screens & Components
- **Screens**: PascalCase with descriptive names (`sign-in.tsx`, `add-workout.tsx`)
- **Components**: PascalCase matching component name (`Logo.tsx`, `AppleSignInButton.tsx`)
- **Layouts**: `_layout.tsx` for Expo Router layouts

### Services & Utilities
- **Services**: PascalCase class names (`ErrorHandler.ts`, `SessionManager.ts`)
- **Utilities**: kebab-case for utility functions (`auth-utils.ts`)
- **Types**: kebab-case with `.ts` extension (`form-feedback.ts`)

### Configuration Files
- **Root level**: Standard names (`package.json`, `tsconfig.json`, `babel.config.js`)
- **Expo**: `app.json`, `eas.json`, `expo-env.d.ts`
- **Metro**: `metro.config.js` with custom tslib resolver

## Import Path Conventions

### Alias Configuration
- **`@/*`** - Root directory alias for clean imports
- **Relative imports** for same-directory files
- **Absolute imports** via @ alias for cross-directory references

### Example Import Patterns
```typescript
// Root alias imports
import { supabase } from '@/lib/supabase'
import { AuthContext } from '@/contexts/AuthContext'

// Relative imports within same directory
import './styles.css'
import { helper } from './utils'

// Expo Router navigation
import { router } from 'expo-router'
```

## State Management Architecture

### Context Providers
- **AuthContext**: User authentication state, session management
- **FoodContext**: Food logging, calorie tracking
- **WorkoutsContext**: Exercise tracking, workout history

### Service Layer
- **ErrorHandler**: Centralized error handling and logging
- **OAuthHandler**: OAuth flow management (Apple, Google)
- **SessionManager**: Session persistence and refresh logic

## Database Schema Organization

### Tables
- **`workouts`** - Exercise tracking with user_id foreign key
- **`foods`** - Food logging with calorie data
- **Row Level Security** enabled on all user data tables
- **Policies** for CRUD operations scoped to authenticated users

### Migrations
- **Sequential numbering**: `001_`, `002_`, etc.
- **Descriptive names**: `create_workouts_and_foods_tables.sql`
- **Include RLS policies** and indexes in migration files
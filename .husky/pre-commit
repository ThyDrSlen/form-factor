# FAST: Check for merge conflict markers FIRST (instant fail)
echo "ğŸ” Checking for merge conflict markers..."
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)
if [ -n "$STAGED_FILES" ]; then
    if echo "$STAGED_FILES" | tr '\n' '\0' | xargs -0 grep -lE '^<<<<<<<|^>>>>>>>|^=======$' 2>/dev/null; then
        echo "âŒ ERROR: Merge conflict markers found in staged files!"
        echo "Fix conflicts before committing."
        exit 1
    fi
fi
echo "âœ… No conflict markers found"

echo "ğŸ” Running lint + type-check before commit..."
bun run ci:local

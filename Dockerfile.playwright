FROM mcr.microsoft.com/playwright:v1.51.0-jammy

# Install Bun
RUN apt-get update && apt-get install -y curl unzip \
  && curl -fsSL https://bun.sh/install | bash

ENV PATH="/root/.bun/bin:${PATH}"

WORKDIR /app

# Copy package files
COPY package.json bun.lockb ./

# Install dependencies
RUN bun install --frozen-lockfile

# Copy the rest of the application
COPY . .

# Default command to run tests
CMD ["bun", "run", "test:e2e"]
